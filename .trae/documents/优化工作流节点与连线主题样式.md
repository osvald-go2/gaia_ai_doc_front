## 目标
- 根据当前主题（暗色/Claude）优化工作流节点视觉：背景、边框、文字与图标颜色、阴影与 hover 状态。
- 将连线与箭头改为主题色兼容（非纯黑/纯白），在不同主题下自动适配。

## 设计原则
- 统一使用已有 CSS 变量：`--primary`、`--foreground`、`--border`、`--card`、`--chart-1..5` 等；避免硬编码 hex。
- 保持对比度与层次：节点背景用低不透明度的主题色渐变，边框轻微加深；文字与图标用主题色或前景色。
- 交互动效低侵入：hover 微阴影与轻微位移；选中加亮边框与光晕。

## 改动文件
- `src/components/WorkflowPreview.tsx`
- （可选）`src/styles/globals.css`：补充 SVG 专用的颜色工具类或变量映射（如需要）。

## 实现步骤
### 1) 引入主题色访问能力
- 在 `WorkflowPreview.tsx` 顶部引入 `useTheme`：`import { useTheme } from './ThemeProvider'`
- 获取当前主题：`const { theme } = useTheme()`
- 通过 CSS 变量设置 SVG 颜色：在 JSX 中使用 `style={{ stroke: 'var(--primary)' }}`、`style={{ fill: 'var(--primary)' }}`；不要再使用 `stroke="#000000"`/`dark:stroke-white`。

### 2) 连线与箭头主题化
- 修改连接线：
  ```tsx
  <path
    d={`M ${startX} ${startY} C ${midX} ${startY}, ${midX} ${endY}, ${endX} ${endY}`}
    style={{ stroke: 'var(--primary)' }}
    strokeWidth={2}
    fill="none"
    opacity={0.35}
    markerEnd="url(#arrowhead)"
  />
  ```
- 修改箭头 `marker`：
  ```tsx
  <marker id="arrowhead" ...>
    <polygon points="0 0, 10 5, 0 10" style={{ fill: 'var(--primary)' }} />
  </marker>
  ```
- （可选）根据节点类型调整线色：输入/输出/处理线使用 `--chart-2/3`；建立 `getLineColor(typeFrom,typeTo)` 返回 `var(--chart-x)` 并应用到 `stroke`。

### 3) 节点样式重构
- 将 `getNodeColor(type)` 改为返回一组类，统一用 CSS 变量：
  - `input`: `bg-gradient-to-br from-secondary/30 to-secondary/10 border-border text-foreground`
  - `process`: `bg-gradient-to-br from-primary/10 to-primary/5 border-primary/40 text-foreground`
  - `output`: `bg-gradient-to-br from-accent/10 to-accent/5 border-accent-foreground/30 text-foreground`（或用 `--chart-1..3`）
- 按类型设置图标颜色：`text-primary` 对处理节点；输入使用 `dark:text-blue-400`（或 `text-foreground`）；输出使用 `dark:text-green-400`。
- 统一交互态：
  - `hover:-translate-y-0.5 hover:shadow-md`
  - 选中（有 SQL）：在右上角图标已存在的基础上，`group-hover:opacity-100`。
- 统一尺寸与内边距：保持 `w-[120px] h-[70px] p-2.5 rounded-lg border-2`。

### 4) 代码改点位置
- 替换 `stroke="#000000" className="dark:stroke-white"` 为 `style={{ stroke: 'var(--primary)' }}`（`WorkflowPreview.tsx:335-341`）
- 替换箭头 `polygon` 的 `fill` 为 `style={{ fill: 'var(--primary)' }}`（`WorkflowPreview.tsx:320`）
- 重写 `getNodeColor` 返回符合主题的类字符串（`WorkflowPreview.tsx:273-284`）
- 调整节点图标颜色与文本颜色（`WorkflowPreview.tsx:369-373`）：使用 `text-foreground` 与按类型 `text-primary` 等。

### 5) 可选增强（若你同意）
- 根据主题切换线色：暗色用 `--primary`，Claude 主题线色用 `--ring` 或 `--primary`，并将 `opacity` 适度降低（0.25-0.35）。
- 选中节点高亮：在按钮外层加 `data-selected` 时 `ring-2 ring-primary/30`。
- 引入 `--chart-*` 映射：输入/处理/输出分别用 `--chart-2/3/1`，在 `globals.css` 已有变量，无需新增。

## 验证
- 打开工作流预览，确认：
  - 连线与箭头颜色随主题变化且不再是黑白
  - 三类节点在暗色/Claude 下均保持对比度舒适、hover 有轻微动效
- 跨主题切换（系统设置 → 主题模式）确保样式无闪烁，颜色正确。